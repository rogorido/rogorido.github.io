---
import { Image } from "astro:assets";
import { profile } from "../../settings";
import SocialIcons from "./SocialIcons.astro";
import ProfilePictures from "@/assets/fotoigorsosa.png";
import { getCollection } from "astro:content";
import { template } from "@/settings";

const isBlogPopulated = await getCollection("blog").then(
  (collection) => collection.length > 0,
);

const { fullName, title } = profile;
---

<aside
  class="flex h-screen w-[20rem] flex-col bg-base-200 px-4 pt-4 text-base-content"
>
  <div class="my-8 flex h-full flex-col justify-between">
    <div>
      <div class="flex flex-col items-center justify-center">
        <Image
          class="mask mask-circle size-44"
          src={ProfilePictures}
          alt={`Profile picture of ${fullName}`}
        />
        <h1 class="mt-8 hidden text-lg font-black lg:block">
          {title}
          <span>{fullName}</span>
        </h1>
      </div>
      <div class="mx-4 mt-16">
        <ul class="menu menu-md shrink grow space-y-4 overflow-y-auto">
          <li>
            <a href={`${template.base}/`} class="text-lg">Home</a>
          </li>
          <li>
            <a href={`${template.base}/cv`} class="text-lg">CV</a>
          </li>
          <li>
            <a href={`${template.base}/research`} class="text-lg">Research</a>
          </li>
          <li>
            <a href={`${template.base}/papers`} class="text-lg">Publications</a>
          </li>

          <li>
            <a href={`${template.base}/skills`} class="text-lg">Skills</a>
          </li>
          <li>
            <a href={`${template.base}/dotfiles`} class="text-lg">Dotfiles</a>
          </li>
          {
            isBlogPopulated && (
              <li>
                <a href={`${template.base}/blog/1`} class="text-lg">
                  Blog
                </a>
              </li>
            )
          }
        </ul>
      </div>
    </div>
    <div class="mx-4">
      <SocialIcons />
    </div>
  </div>
</aside>
